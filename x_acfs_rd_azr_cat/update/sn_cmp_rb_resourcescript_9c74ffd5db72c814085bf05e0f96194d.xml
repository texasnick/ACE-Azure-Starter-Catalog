<?xml version="1.0" encoding="UTF-8"?><record_update table="sn_cmp_rb_resourcescript">
    <sn_cmp_rb_resourcescript action="INSERT_OR_UPDATE">
        <name>Azure VM from User Image ARM Template</name>
        <resource display_value="Azure VM from User Image">cc74ffd5db72c814085bf05e0f961943</resource>
        <script>{"$schema":"https://schema.management.azure.com/schemas/2015-01-01/deploymentTemplate.json#","contentVersion":"1.0.0.0","parameters":{"adminPassword":{"metadata":{"description":"Password for the Virtual Machine"},"type":"securestring"},"adminUsername":{"metadata":{"description":"User Name for the Virtual Machine"},"type":"string"},"bootDiagnosticsStorageAccountName":{"metadata":{"description":"This is the name of the your storage account"},"type":"string"},"bootDiagnosticsStorageAccountResourceGroupName":{"metadata":{"description":"Resource group of the existing storage account"},"type":"string"},"customVmName":{"metadata":{"description":"This is the name of the your VM"},"type":"string"},"dnsLabelPrefix":{"metadata":{"description":"DNS Label for the Public IP. Must be lowercase. It should match with the following regular expression: ^[a-z][a-z0-9-]{1,61}[a-z0-9]$ or it will raise an error."},"type":"string"},"existingVnetResourceGroupName":{"metadata":{"description":"Resource group of the existing VNET"},"type":"string"},"newOrExistingSubnetName":{"metadata":{"description":"New or Existing subnet Name"},"type":"string"},"newOrExistingVnet":{"allowedValues":["new","existing"],"metadata":{"description":"Select if this template needs a new VNet or will reference an existing VNet"},"type":"string"},"newOrExistingVnetName":{"defaultValue":"","metadata":{"description":"New or Existing VNet Name"},"type":"string"},"osDiskVhdUri":{"metadata":{"description":"Uri of the your user image"},"type":"string"},"osType":{"allowedValues":["Windows","Linux"],"metadata":{"description":"This is the OS that your VM will be running"},"type":"string"},"template_location":{"defaultValue":"[resourceGroup().location]","metadata":{"description":"Location for all resources."},"type":"string"},"vmSize":{"metadata":{"description":"This is the size of your VM"},"type":"string"}},"resources":[{"apiVersion":"2016-04-30-preview","location":"[parameters('template_location')]","name":"[variables('imageName')]","properties":{"storageProfile":{"osDisk":{"blobUri":"[parameters('osDiskVhdUri')]","osState":"Generalized","osType":"[parameters('osType')]","storageAccountType":"Standard_LRS"}}},"type":"Microsoft.Compute/images"},{"apiVersion":"2015-01-01","name":"vnet-template","properties":{"mode":"Incremental","parameters":{"existingVnetResourceGroupName":{"value":"[parameters('existingVnetResourceGroupName')]"},"subnetName":{"value":"[parameters('newOrExistingSubnetName')]"},"virtualNetworkName":{"value":"[parameters('newOrExistingVnetName')]"}},"templateLink":{"contentVersion":"1.0.0.0","uri":"[variables('templatelink')]"}},"type":"Microsoft.Resources/deployments"},{"apiVersion":"2015-06-15","location":"[parameters('template_location')]","name":"[variables('publicIPAddressName')]","properties":{"dnsSettings":{"domainNameLabel":"[parameters('dnsLabelPrefix')]"},"publicIPAllocationMethod":"[variables('publicIPAddressType')]"},"type":"Microsoft.Network/publicIPAddresses"},{"apiVersion":"2016-03-30","dependsOn":["[concat('Microsoft.Network/publicIPAddresses/', variables('publicIPAddressName'))]","Microsoft.Resources/deployments/vnet-template"],"location":"[parameters('template_location')]","name":"[variables('nicName')]","properties":{"ipConfigurations":[{"name":"ipconfig1","properties":{"privateIPAllocationMethod":"Dynamic","publicIPAddress":{"id":"[resourceId('Microsoft.Network/publicIPAddresses',variables('publicIPAddressName'))]"},"subnet":{"id":"[reference('vnet-template').outputs.subnet1Ref.value]"}}}]},"type":"Microsoft.Network/networkInterfaces"},{"apiVersion":"2016-04-30-preview","dependsOn":["[concat('Microsoft.Network/networkInterfaces/', variables('nicName'))]","[variables('imageName')]"],"location":"[parameters('template_location')]","name":"[variables('vmName')]","properties":{"diagnosticsProfile":{"bootDiagnostics":{"enabled":true,"storageUri":"[concat(reference(resourceId(parameters('bootDiagnosticsStorageAccountResourceGroupName'), 'Microsoft.Storage/storageAccounts/', parameters('bootDiagnosticsStorageAccountName')), variables('apiVersion')).primaryEndpoints.blob)]"}},"hardwareProfile":{"vmSize":"[parameters('vmSize')]"},"networkProfile":{"networkInterfaces":[{"id":"[resourceId('Microsoft.Network/networkInterfaces',variables('nicName'))]"}]},"osProfile":{"adminPassword":"[parameters('adminPassword')]","adminUsername":"[parameters('adminUsername')]","computerName":"[variables('vmName')]"},"storageProfile":{"imageReference":{"id":"[resourceId('Microsoft.Compute/images', variables('imageName'))]"}}},"type":"Microsoft.Compute/virtualMachines"}],"variables":{"apiVersion":"2015-06-15","imageName":"myCustomImage","nicName":"[concat(parameters('customVmName'),'Nic')]","publicIPAddressName":"[concat(parameters('customVmName'),'IP')]","publicIPAddressType":"Dynamic","templatelink":"[concat('https://raw.githubusercontent.com/singhkay/azure-quickstart-templates/master/101-vm-from-user-image/',parameters('newOrExistingVnet'),'vnet.json')]","vmName":"[parameters('customVmName')]"}}</script>
        <script_js/>
        <sys_class_name>sn_cmp_rb_resourcescript</sys_class_name>
        <sys_created_by>tom.blevins</sys_created_by>
        <sys_created_on>2020-02-05 18:51:30</sys_created_on>
        <sys_id>9c74ffd5db72c814085bf05e0f96194d</sys_id>
        <sys_mod_count>0</sys_mod_count>
        <sys_name>Azure VM from User Image ARM Template</sys_name>
        <sys_package display_value="ACE-Azure Starter Catalog" source="x_acfs_rd_azr_cat">95c72cc6db128450f9cc5890cf9619d6</sys_package>
        <sys_policy/>
        <sys_scope display_value="ACE-Azure Starter Catalog">95c72cc6db128450f9cc5890cf9619d6</sys_scope>
        <sys_update_name>sn_cmp_rb_resourcescript_9c74ffd5db72c814085bf05e0f96194d</sys_update_name>
        <sys_updated_by>tom.blevins</sys_updated_by>
        <sys_updated_on>2020-02-05 18:51:30</sys_updated_on>
        <type>18</type>
    </sn_cmp_rb_resourcescript>
</record_update>
